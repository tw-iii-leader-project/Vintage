<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<style type="text/css">
	.red{
		color:red;
	}
</style>
<link rel="stylesheet" href="css/style.css" type="text/css">
<script type="text/javascript">
	$(function(){
		// var t = parseInt($("#test").html());
		// var testJson = {"p_id":t};
		// $.ajax({
		// 	url:"panProductDetailSelect",
		// 	type:"POST",
		// 	dataType:"json",
		// 	contentType:"application/json;charset=utf-8",
		// 	data:JSON.stringify(testJson),
		// 	success:function(response){
		// 		$.each(response,function(i,v){
		// 			$("#detailsTest1").append(
		// 				`<div>${v.p_name}</div>
		// 				<div>${v.price}</div>`
		// 			);
		// 			$("#detailsTest2").append(
		// 				`<div>${v.p_name}</div>
		// 				<div>${v.p_main}</div>`
		// 			);
		// 		});
		// 	},
		// 	error:function(){}
		// });
		var userName = $("#secretUserName").html();
		var userData = {"user_acc":userName};
		$.ajax({
			async:true,
			url:"panTestSelectMainByName",
			type:"POST",
			dataType:"json",
			contentType:"application/json;charset=utf-8",
			data:JSON.stringify(userData),
			success:function(response){
				// var tMain = [];
				// $.each(response,function(i,v){
				// 	tMain.push(`${v.p_main}`);
				// });
				// nMain = $.uniqueSort(tMain);
				// $.each(nMain,function(i,v){
				// 	$("#userMainBox ul").append(
				// 		`<li>${v}</li>`
				// 	);
				// });
				$.each(response,function(i,v){
					$("#detailsTest1").append(
						`<ul>
							<li>${v.p_name}</li>
							<li>${v.p_main}</li>
							<li>${v.price}</li>
						</ul>`
					);
				});
			},
			error:function(msg){
				console.log(msg);
			}
		});
		// $("#userMainBox ul").on("click","li",function(){
		// 	var t = $(this).html();
		// 	alert(t);
		// });

		// var t = [1,1,2,2,2,3,3,4,5,5,5,6,7,8,9,1];
		// alert(t);
		// var t2 = $.uniqueSort(t);
		// alert(t2);
		
		$("#jsonDataTest").click(function(){
			$.ajax({
				url:"panTestJsonData",
				type:"POST",
				dataType:"json",
				contentType:"application/json;charset=utf-8",
				success:function(response){
					$.each(response,function(i,v){
						$("#jsonDataBox").append(
							`<div>${v.name}</div>
							<div>${v.msg}</div>`
						);
					});
					
				},
				error:function(msg){
					console.log(msg);
				}
			});
		});
		$("#shoppingList").append(
			`<tr>
                <td style="display: none;">123</td>													
                <td class="si-pic"><img src="img/products/product-1.jpg"											
                    alt=""></td>												
                <td class="si-text">												
                	<div class="product-selected">													
                        <p>$600 x 5</p>														
                        <h6>product</h6>									
                	</div>										
                </td>											
                <td class="si-close"><a href="#" style="text-decoration:none">x</a></td>								
            </tr>`
		);
		
		$("#shoppingList tr .si-close").on("click","a",function(e){
			e.preventDefault();
			var cartId = $("td").first().html();
			console.log(cartId);
			$(this).closest("tr").remove();
		});
	});


</script>

</head>
<body>
	<h1><span id="test" th:text="'ID:'+${secretProductId}"></span> love GawrGura!!!</h1>
	<span id="secretUserName">GawrGura</span>
	<img src="https://img.4gamers.com.tw/ckfinder/images/ALIEN/2021-1/maxresd213efault.jpg?versionId=Kmz4sadnKzhhuFKgyTuOes3KgyKq8eCZ">
	<div id="detailsTest1">
		<table> 
			<tbody id="shoppingList">
        	<!-- ShoppingList Here -->
			</tbody>
		</table>
	</div>
	<button id="testOn"></button>
	<div id="detailsTest2" style="border: 2px solid red;">
		<ul id="userProductMain">
			<li class="active">Clothings</li>

		</ul>
	</div>
	<div id="userMainBox" style="border:2px solid blue">
		<ul>
			<li class="action">ALL</li>
		</ul>
	</div>
	<a href="panTestSelectProductAll">testPageSelect</a>
	<div>
		<div>jsonDataHere</div>
		<button id="jsonDataTest">GO</button>
		<div id="jsonDataBox"></div>
		<div>
			
		</div>
	</div>
</body>
</html>